!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-plaid-link",["exports","@angular/core","@angular/common"],e):e((t=t||self)["ngx-plaid-link"]={},t.ng.core,t.ng.common)}(this,(function(t,e,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function n(t,e,o,n){var i,r=arguments.length,u=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(r<3?i(u):r>3?i(e,o,u):i(e,o))||u);return r>3&&u&&Object.defineProperty(e,o,u),u}function i(t,e,o,n){return new(o||(o=Promise))((function(i,r){function u(t){try{p(n.next(t))}catch(t){r(t)}}function s(t){try{p(n.throw(t))}catch(t){r(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(u,s)}p((n=n.apply(t,e||[])).next())}))}function r(t,e){var o,n,i,r,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,n=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){u.label=r[1];break}if(6===r[0]&&u.label<i[1]){u.label=i[1],i=r;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(r);break}i[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var u=function(){function t(t){this.plaidLink=Plaid.create(t)}return t.prototype.open=function(t){this.plaidLink.open(t)},t.prototype.exit=function(){this.plaidLink.exit()},t}(),s=function(){function t(){}return t.prototype.createPlaid=function(t){return this.loadPlaid().then((function(){return new u(t)}))},t.prototype.loadPlaid=function(){return this.loaded||(this.loaded=new Promise((function(t,e){var o=document.createElement("script");o.type="text/javascript",o.src="https://cdn.plaid.com/link/v2/stable/link-initialize.js",o.onerror=function(t){return e(t)},o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:o.onload=function(){t()},document.getElementsByTagName("body")[0].appendChild(o)}))),this.loaded},t=n([e.Injectable()],t)}();var p=function(){function t(){this.Event=new e.EventEmitter,this.Success=new e.EventEmitter,this.Click=new e.EventEmitter,this.Load=new e.EventEmitter,this.Exit=new e.EventEmitter,this.defaultProps={apiVersion:"v2",env:"sandbox",institution:null,selectAccount:!1,token:null,publicKey:null,webhook:"",product:["auth"],countryCodes:["US"],style:{"background-color":"#0085e4","transition-duration":"350ms","transition-property":"background-color, box-shadow","transition-timing-function":"ease-in-out","-webkit-appearance":"button",border:"0","border-radius":"4px","box-shadow":"0 2px 4px 0 rgba(0,0,0,0.1), inset 0 1px 0 0 rgba(255,255,255,0.1)",color:"#fff","font-size":"20px",height:"56px",outline:"0","text-align":"center","text-transform":"none",padding:"0 2em",cursor:"pointer"},buttonText:"Log In To Your Bank Account",className:"plaid-link-button"},this.publicKey=this.defaultProps.publicKey,this.apiVersion=this.defaultProps.apiVersion,this.env=this.defaultProps.env,this.institution=this.defaultProps.institution,this.product=this.defaultProps.product,this.selectAccount=this.defaultProps.selectAccount,this.token=this.defaultProps.token,this.webhook=this.defaultProps.webhook,this.countryCodes=this.defaultProps.countryCodes,this.style=this.defaultProps.style,this.buttonText=this.defaultProps.buttonText,this.className=this.defaultProps.className}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t.prototype.onScriptError=function(){console.error("There was an issue loading the link-initialize.js script")},t.prototype.onDirectiveSuccess=function(t){this.Success.emit(t)},t.prototype.onDirectiveExit=function(t){this.Exit.emit(t)},t.prototype.onDirectiveLoad=function(t){this.Load.emit(t)},t.prototype.onDirectiveEvent=function(t){this.Event.emit(t)},t.prototype.onDirectiveClick=function(t){this.Click.emit(t)},n([e.Input()],t.prototype,"clientName",void 0),n([e.Output()],t.prototype,"Event",void 0),n([e.Output()],t.prototype,"Success",void 0),n([e.Output()],t.prototype,"Click",void 0),n([e.Output()],t.prototype,"Load",void 0),n([e.Output()],t.prototype,"Exit",void 0),n([e.Input()],t.prototype,"publicKey",void 0),n([e.Input()],t.prototype,"apiVersion",void 0),n([e.Input()],t.prototype,"env",void 0),n([e.Input()],t.prototype,"institution",void 0),n([e.Input()],t.prototype,"product",void 0),n([e.Input()],t.prototype,"selectAccount",void 0),n([e.Input()],t.prototype,"token",void 0),n([e.Input()],t.prototype,"webhook",void 0),n([e.Input()],t.prototype,"countryCodes",void 0),n([e.Input()],t.prototype,"style",void 0),n([e.Input()],t.prototype,"buttonText",void 0),n([e.Input()],t.prototype,"className",void 0),t=n([e.Component({selector:"mr-ngx-plaid-link-button",template:'\n    <button ngxPlaidLink\n            [class]="className"\n            [ngStyle]="style"\n            [publicKey]="publicKey"\n            [clientName]="clientName"\n            [apiVersion]="apiVersion"\n            [env]="env"\n            [institution]="institution"\n            [product]="product"\n            [selectAccount]="selectAccount"\n            [token]="token"\n            [webhook]="webhook"\n            [countryCodes]="countryCodes"\n            (Success)="onDirectiveSuccess($event)"\n            (Exit)="onDirectiveExit($event)"\n            (Load)="onDirectiveLoad($event)"\n            (Event)="onDirectiveEvent($event)"\n            (Click)="onDirectiveClick($event)"\n    >\n      {{ buttonText }}\n    </button>\n  '})],t)}();var c=function(){function t(t){this.plaidLinkLoader=t,this.Event=new e.EventEmitter,this.Click=new e.EventEmitter,this.Load=new e.EventEmitter,this.Exit=new e.EventEmitter,this.Success=new e.EventEmitter,this.defaultProps={apiVersion:"v2",env:"sandbox",institution:null,selectAccount:!1,publicKey:null,token:null,webhook:"",product:["auth"],countryCodes:["US"]},this.publicKey=this.defaultProps.publicKey,this.apiVersion=this.defaultProps.apiVersion,this.env=this.defaultProps.env,this.institution=this.defaultProps.institution,this.product=this.defaultProps.product,this.selectAccount=this.defaultProps.selectAccount,this.token=this.defaultProps.token,this.webhook=this.defaultProps.webhook,this.countryCodes=this.defaultProps.countryCodes,this.disabledButton=!0}return t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){var t,e=this;return r(this,(function(o){switch(o.label){case 0:return[4,this.plaidLinkLoader.createPlaid({env:this.env,key:this.publicKey,product:this.product,apiVersion:"v2",clientName:this.clientName,countryCodes:this.countryCodes,onSuccess:function(t,o){return e.onSuccess(t,o)},onExit:function(t,o){return e.onExit(t,o)},onEvent:function(t,o){return e.onEvent(t,o)},onLoad:function(){return e.onLoad()},selectAccount:this.selectAccount,token:this.token||null,webhook:this.webhook||null})];case 1:return t=o.sent(),this.disabledButton=!1,this.plaidLinkHandler=t,[2]}}))}))},t.prototype.onExit=function(t,e){this.Exit.emit({error:t,metadata:e})},t.prototype.onEvent=function(t,e){this.Event.emit({eventName:t,metadata:e})},t.prototype.onSuccess=function(t,e){this.Success.emit({token:t,metadata:e})},t.prototype.onClick=function(t){this.Click.emit(t);var e=this.institution||null;this.plaidLinkHandler&&this.plaidLinkHandler.open(e)},t.prototype.onLoad=function(t){void 0===t&&(t="link_loaded"),this.Load.emit(t)},t.ctorParameters=function(){return[{type:s}]},n([e.Output()],t.prototype,"Event",void 0),n([e.Output()],t.prototype,"Click",void 0),n([e.Output()],t.prototype,"Load",void 0),n([e.Output()],t.prototype,"Exit",void 0),n([e.Output()],t.prototype,"Success",void 0),n([e.Input()],t.prototype,"clientName",void 0),n([e.HostBinding("disabled")],t.prototype,"disabledButton",void 0),n([e.Input()],t.prototype,"publicKey",void 0),n([e.Input()],t.prototype,"apiVersion",void 0),n([e.Input()],t.prototype,"env",void 0),n([e.Input()],t.prototype,"institution",void 0),n([e.Input()],t.prototype,"product",void 0),n([e.Input()],t.prototype,"selectAccount",void 0),n([e.Input()],t.prototype,"token",void 0),n([e.Input()],t.prototype,"webhook",void 0),n([e.Input()],t.prototype,"countryCodes",void 0),n([e.HostListener("click",["$event"])],t.prototype,"onClick",null),t=n([e.Directive({selector:"[ngxPlaidLink]"})],t)}(),a=function(){function t(){}return t=n([e.NgModule({imports:[o.CommonModule],providers:[s],declarations:[p,c],exports:[p,c]})],t)}();t.NgxPlaidLinkButtonComponent=p,t.NgxPlaidLinkDirective=c,t.NgxPlaidLinkModule=a,t.NgxPlaidLinkService=s,t.PlaidLinkHandler=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-plaid-link.umd.min.js.map